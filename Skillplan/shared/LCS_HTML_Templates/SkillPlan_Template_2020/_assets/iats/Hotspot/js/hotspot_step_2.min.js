var x,y,i,j,theta,HS_postActivityText,HS_appContainer,HS_questionContainer,HS_hotSpot,HS_imageMapAreas,HS_question,questionFile,validSrc,code,link,topLevelDocument,topLevelBody,D2LDEBUG=!1,HotSpotApp={AppData:null,sceneNum:0,maxScenes:null,containerRef:null,mobileDevice:!1,activeActivity:!1,ti:1,currentAttempts:0,headingLevel:null,normalState:null,completeState:null,wrongState:null,restartButton:null,startButton:null,nextButton:null,noPost:!1,allCompleted:[],correctCheck:[],score:0,allCompletedArr:[],correctCheckArr:[],SCORMConnectionAttempts:0,SCORMEnabled:!0,SCORMConnected:!1,SCORMConnectionInterval:null},correct='<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOUFFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5OEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5OUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PllHhcQAAACASURBVHjaYmIgB2zx7wBjIGAhSzMDQzmUzcBEtmYI4GeiQPMMIM5iokQzg8/G/0xQBYzkaAZxmKCap8FClRTNEANAmhkYMsAKkQ0hQjMsGj8i8UGGINgENIMAIw7bGIjRDPMCA1CyAkh2kqoZYQB2QwhqRngBM+T5idEMAgABBgBezD9OGUJHCwAAAABJRU5ErkJggg==" alt="right check mark" disabled/>',wrong='<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMThFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5Q0VBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxNkVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuBTV64AAAC/SURBVHjahJPRDcIwDETtCLEAjARSv/iL0hXoQGUFoi5QCUaCBfgJDnJQmubSSlak691zaqscQqA3n/dENEnNR3reCDwvOl3l6KTsITw+UTP6LoYvUqOaUHhU35T0BJgz7wqShan0/wB67aEGqYSH/DM5zoCZUScv5WrhmFsBAKTaGQIUci86ewn3uScBDJi2K2SHtmM2pu1b21kAwLR7tJ0FoLWq1orzG3Ro2gDy9+/0tFv/QtSlcwrbpH8FGAC2umDxE/BZxwAAAABJRU5ErkJggg==" alt="wrong x" disabled/>';function closePopup(t){var e;$(topLevelDocument).find("#HS_popupBackground").fadeOut(300),$(topLevelDocument).find("#HS_questionContainer").fadeOut(300,function(){$(topLevelDocument).find("#HS_questionContainer").remove(),$(topLevelDocument).find("#HS_popupBackground").remove(),$(window.top.document.body).css("overflow","unset"),$(topLevelDocument).find("#"+t).length>0?$(topLevelDocument).find("#"+t).focus():$(document.body).find("#"+t).focus()}),HotSpotApp.showHotspots();for(var p=0;p<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;p++)HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].key===t&&("assessment"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].activityType?!0===HotSpotApp.correctCheck[p]?!0===HotSpotApp.allCompleted[p]?($("#"+t).mapster("set",!1,HotSpotApp.wrongState),$("#"+t).mapster("set",!1,HotSpotApp.correctState),$("#"+t).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(p,1,!0)):($("#"+t).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(p,1,!0),e=document.getElementById(t).alt.replace("Item Found","Item Complete"),document.getElementById(t).alt=e,document.getElementById(t).title="Item Complete"):!0===HotSpotApp.allCompleted[i]?($("#"+t).mapster("set",!1,HotSpotApp.wrongState),$("#"+t).mapster("set",!1,HotSpotApp.correctState),$("#"+t).mapster("set",!0,HotSpotApp.wrongState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(p,1,!0)):$(topLevelDocument).find("#HS_finishButton").attr("disabled")?($("#HS_questionContainer").remove(),HotSpotApp.activeActivity=!1,HotSpotApp.showHotspots()):($("#"+t).mapster("set",!0,HotSpotApp.wrongState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(p,1,!0),e=document.getElementById(t).alt.replace("Item Found","Item Incomplete"),document.getElementById(t).alt=e,document.getElementById(t).title="Item Incomplete"):($("#"+t).mapster("set",!0,HotSpotApp.correctState),HotSpotApp.activeActivity=!1,HotSpotApp.allCompleted.splice(p,1,!0),e=document.getElementById(t).alt.replace("Item Found","Item Complete"),document.getElementById(t).alt=e,document.getElementById(t).title="Item Complete"));HotSpotApp.updateProgress()}function getStyle(t){for(var e=0;e<document.styleSheets.length;e++)if(null!==document.styleSheets[e].href&&document.styleSheets[e].href.indexOf(t)>-1)return document.styleSheets[e].href}function d2log(t){void 0!==D2LDEBUG&&D2LDEBUG&&console.log(t)}HotSpotApp.resetActivityData=function(){HotSpotApp.allCompleted=[],HotSpotApp.correctCheck=[]},HotSpotApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(HotSpotApp.containerRef=document.getElementById(e),HotSpotApp.getAppData(HotSpotApp.buildApp)):d2log("ERROR: Missing specified DOM object in HotSpotApp.setupApp()."),$("#HS_screenAlt").click(function(){window.location=this.href})},HotSpotApp.getAppData=function(t){$.getJSON(questionFile,function(e){HotSpotApp.AppData=e,t(HotSpotApp.AppData);try{topLevelDocument=window.parent.document,topLevelBody=parent.document.body;var p=parent.document.getElementsByTagName("head")[0],o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=getStyle("hotspot.min.css"),p.appendChild(o)}catch(t){console.log(t),topLevelDocument=document,topLevelBody=document.body}}).fail(function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)})},HotSpotApp.buildApp=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(HotSpotApp.mobileDevice=!0),parseInt(HotSpotApp.AppData.ShowScenes)>HotSpotApp.AppData.Scenes.length?HotSpotApp.maxScenes=HotSpotApp.AppData.Scenes.length:HotSpotApp.maxScenes=parseInt(HotSpotApp.AppData.ShowScenes),HotSpotApp.Scenes=HotSpotApp.AppData.Scenes,HotSpotApp.headingLevel=parseInt(HotSpotApp.AppData.HeadingLevel),null===HotSpotApp.headingLevel||void 0===HotSpotApp.headingLevel||"none"===HotSpotApp.headingLevel||isNaN(HotSpotApp.headingLevel)||""===HotSpotApp.headingLevel?HotSpotApp.headingLevel=1:HotSpotApp.headingLevel>4&&(HotSpotApp.headingLevel=4),!0===HotSpotApp.AppData.Randomize&&HotSpotApp.shuffle(HotSpotApp.Scenes),!("none"!==HotSpotApp.AppData.PostActivityText&&""!==HotSpotApp.AppData.PostActivityText&&null!==HotSpotApp.AppData.PostActivityText&&void 0!==HotSpotApp.AppData.PostActivityText||"none"!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia)?HotSpotApp.noPost=!0:HotSpotApp.noPost=!1,HotSpotApp.AppData.SCORMEnabled&&(HotSpotApp.SCORMEnabled=HotSpotApp.AppData.SCORMEnabled,HotSpotApp.SCORMEnabled&&HotSpotApp.establishScorm()),HotSpotApp.buildColourKeys(),HotSpotApp.buildAppFrame(),HotSpotApp.loadButtons(),!("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText||"none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)?HotSpotApp.buildActivity():HotSpotApp.buildPreActivity(),$(HotSpotApp.containerRef).addClass("rs_preserve")},HotSpotApp.buildColourKeys=function(){var t=HotSpotApp.AppData.visibleStyle.colour.substr(1,HotSpotApp.AppData.visibleStyle.colour.length),e=parseInt(HotSpotApp.AppData.visibleStyle.opacity.substr(0,HotSpotApp.AppData.visibleStyle.opacity.length-1))/100,p=HotSpotApp.AppData.visibleStyle.stroke,o=HotSpotApp.AppData.visibleStyle.strokeColour.substr(1,HotSpotApp.AppData.visibleStyle.strokeColour.length),n=parseInt(HotSpotApp.AppData.visibleStyle.strokeWidth),i=HotSpotApp.AppData.highlightStyle.colour.substr(1,HotSpotApp.AppData.highlightStyle.colour.length),a=parseInt(HotSpotApp.AppData.highlightStyle.opacity.substr(0,HotSpotApp.AppData.highlightStyle.opacity.length-1))/100,s=HotSpotApp.AppData.highlightStyle.stroke,c=HotSpotApp.AppData.highlightStyle.strokeColour.substr(1,HotSpotApp.AppData.highlightStyle.strokeColour.length),S=parseInt(HotSpotApp.AppData.highlightStyle.strokeWidth);HotSpotApp.normalState={staticState:!0,highlight:!0,fade:!1,fadeDuration:0},HotSpotApp.correctState={fillColor:"00FF00",fillOpacity:.35},HotSpotApp.wrongState={fillColor:"FF0000",fillOpacity:.35},!0===HotSpotApp.AppData.visible?(HotSpotApp.normalState.fillColor=t,HotSpotApp.normalState.fillOpacity=e,HotSpotApp.normalState.stroke=p,!0===p&&(HotSpotApp.normalState.strokeColor=o,HotSpotApp.normalState.strokeWidth=n)):!0===HotSpotApp.AppData.highlight&&!0===HotSpotApp.mobileDevice?(HotSpotApp.normalState.fillColor=i,HotSpotApp.normalState.fillOpacity=a/2,HotSpotApp.normalState.stroke=s,!0===s&&(HotSpotApp.normalState.strokeColor=c,HotSpotApp.normalState.strokeWidth=S,HotSpotApp.normalState.strokeOpacity=.5)):(HotSpotApp.normalState.fillColor="FFFFFF",HotSpotApp.normalState.fillOpacity=0),!0===HotSpotApp.AppData.highlight?(HotSpotApp.normalState.render_highlight={},HotSpotApp.normalState.render_highlight.fillColor=i,HotSpotApp.normalState.render_highlight.fillOpacity=a,HotSpotApp.normalState.render_highlight.stroke=s,!0===s&&(HotSpotApp.normalState.render_highlight.strokeColor=c,HotSpotApp.normalState.render_highlight.strokeWidth=S)):(HotSpotApp.normalState.render_highlight={},HotSpotApp.normalState.render_highlight.fillColor="FFFFFF",HotSpotApp.normalState.render_highlight.fillOpacity=0,HotSpotApp.normalState.render_highlight.stroke=!0,HotSpotApp.normalState.render_highlight.strokeColor="00FFFF",HotSpotApp.normalState.render_highlight.strokeWidth=3)},HotSpotApp.buildAppFrame=function(){var t=document.createElement("section");t.id="HS_container";var e=document.createElement("section");e.id="HS_content";var p=document.createElement("section");p.id="HS_header",p.innerHTML="<h"+HotSpotApp.headingLevel+">"+HotSpotApp.AppData.ActivityName+"</h"+HotSpotApp.headingLevel+">",t.appendChild(e),$(t).appendTo(HotSpotApp.containerRef),(HS_appContainer=document.createElement("div")).id="HS_appContainer",$(p).hide().appendTo(e).slideDown(500,"swing"),e.appendChild(HS_appContainer)},HotSpotApp.loadButtons=function(){var t=document.createElement("button");t.id="HS_restartButton",t.setAttribute("class","HS_button"),t.setAttribute("title","Restarts the Activity"),t.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.resetActivityData(),HotSpotApp.sceneNum=0,!("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText||"none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)?HotSpotApp.buildActivity():HotSpotApp.buildPreActivity()};var e=document.createElement("span");e.setAttribute("class","HS_buttonLabel"),e.innerHTML="Restart Activity",t.appendChild(e),HotSpotApp.restartButton=t;var p=document.createElement("button");p.id="HS_startButton",p.setAttribute("class","HS_button"),p.setAttribute("title","Starts the Activity"),p.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.buildActivity()};var o=document.createElement("span");o.setAttribute("class","HS_buttonLabel"),o.innerHTML="Start Activity",p.appendChild(o),HotSpotApp.startButton=p;var n=document.createElement("button");n.id="HS_nextButton",n.setAttribute("class","HS_button"),n.setAttribute("title","Moves to the Next Part of the Activity"),n.onclick=function(){HotSpotApp.clearStage(),HotSpotApp.sceneNum++,HotSpotApp.allCompletedArr.push(HotSpotApp.allCompleted),HotSpotApp.correctCheckArr.push(HotSpotApp.correctCheck),HotSpotApp.sceneNum<HotSpotApp.maxScenes?(HotSpotApp.resetActivityData(),HotSpotApp.buildActivity()):!0===HotSpotApp.noPost?(HotSpotApp.currentAttempts++,HotSpotApp.onComplete(),HotSpotApp.resetActivityData(),HotSpotApp.sceneNum=0,HotSpotApp.buildActivity()):(HotSpotApp.currentAttempts++,HotSpotApp.onComplete(),HotSpotApp.buildPostActivity())};var i=document.createElement("span");i.setAttribute("class","HS_buttonLabel"),n.appendChild(i),HotSpotApp.nextButton=n},HotSpotApp.buildPreActivity=function(){if("none"!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText){var t=document.createElement("p");t.id="HS_preActivityText",t.innerHTML=HotSpotApp.AppData.PreActivityText,$(t).hide().appendTo(HS_appContainer).fadeIn(500)}if("none"!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia)for(i=0;i<HotSpotApp.AppData.PreActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",HS_appContainer,HotSpotApp.AppData.PreActivityMedia[i]);HotSpotApp.score=0,HotSpotApp.buildPreActivityButtons()},HotSpotApp.buildPreActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSet",$(t).hide().appendTo(HS_appContainer).fadeIn(500),t.appendChild(HotSpotApp.startButton)},HotSpotApp.buildPostActivity=function(){if(document.getElementById("HS_header").innerHTML="<h"+HotSpotApp.headingLevel+">"+HotSpotApp.AppData.ActivityName+"</h"+HotSpotApp.headingLevel+">","none"!==HotSpotApp.AppData.PostActivityText&&""!==HotSpotApp.AppData.PostActivityText&&null!==HotSpotApp.AppData.PostActivityText&&void 0!==HotSpotApp.AppData.PostActivityText?((HS_postActivityText=document.createElement("p")).id="HS_postActivityText",HS_postActivityText.innerHTML=HotSpotApp.AppData.PostActivityText,$(HS_postActivityText).hide().appendTo(HS_appContainer).fadeIn(500)):((HS_postActivityText=document.createElement("p")).id="HS_postActivityText",HS_postActivityText.innerHTML="You have completed the activity!",$(HS_postActivityText).hide().appendTo(HS_appContainer).fadeIn(500)),"none"!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia)for(i=0;i<HotSpotApp.AppData.PostActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",HS_appContainer,HotSpotApp.AppData.PostActivityMedia[i]);HotSpotApp.buildPostActivityButtons()},HotSpotApp.buildPostActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSet",$(t).hide().appendTo(HS_appContainer).fadeIn(500),t.appendChild(HotSpotApp.restartButton)},HotSpotApp.buildActivity=function(){for(1===HotSpotApp.AppData.ShowScenes||0===HotSpotApp.Scenes.length?document.getElementById("HS_header").innerHTML="<h"+HotSpotApp.headingLevel+">"+HotSpotApp.Scenes[HotSpotApp.sceneNum].SceneName+"</h"+HotSpotApp.headingLevel+">":document.getElementById("HS_header").innerHTML="<h"+HotSpotApp.headingLevel+">Scene "+(HotSpotApp.sceneNum+1)+": "+HotSpotApp.Scenes[HotSpotApp.sceneNum].SceneName+"</h"+HotSpotApp.headingLevel+">",i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots.length;i++)HotSpotApp.allCompleted.splice(i,1,!1),HotSpotApp.correctCheck.splice(i,1,!1);(HS_hotSpot=document.createElement("div")).id="HS_hotSpot",HS_appContainer.appendChild(HS_hotSpot);var t=document.createElement("div");t.id="HS_instructions","none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions?(t.innerHTML="<p>"+HotSpotApp.Scenes[HotSpotApp.sceneNum].Instructions+'</p><p><span class="HS_instruct_common">Click or tab to each hotspot and select it by clicking or hitting the enter key. Some hotspots may provide additional content or ask follow-up questions.</span></p>',$(t).hide().appendTo(HS_hotSpot).fadeIn()):(t.innerHTML='<span class="HS_instruct_common">Click or tab to each hotspot and select it by clicking or hitting the enter key. Some hotspots may provide additional content or ask follow-up questions.</span><br/><br/>',$(t).hide().appendTo(HS_hotSpot).fadeIn());var e=document.createElement("img");e.id="HS_imageMap",e.src=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.src,e.alt=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.alt,e.setAttribute("usemap","#HS_imageMapAreas"),$(e).hide().appendTo(HS_hotSpot).fadeIn(500);var p=document.createElement("div");p.id="HS__instruction_below","none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].specialInstruction&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].specialInstruction&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].specialInstruction&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].specialInstruction&&(p.innerHTML="<p><b>"+HotSpotApp.Scenes[HotSpotApp.sceneNum].specialInstruction+"</b></p>",$(p).hide().appendTo(HS_hotSpot).fadeIn(500)),(HS_imageMapAreas=document.createElement("map")).id="HS_imageMapAreas",HS_imageMapAreas.name="HS_imageMapAreas",$(HS_imageMapAreas).hide().appendTo(HS_hotSpot).fadeIn(500);var o=document.createElement("p");o.id="HS_progress",o.innerHTML="Items Found: <strong><span id='HS_completed'></span> / <span id='HS_total'>"+HotSpotApp.allCompleted.length+"</span></strong>",$(o).hide().appendTo(HS_hotSpot).fadeIn(500);var n=document.createElement("p");n.id="HS_scenetracker",HotSpotApp.Scenes.length>1&&HotSpotApp.AppData.ShowScenes>1&&(n.innerHTML="Scene: <strong>"+(HotSpotApp.sceneNum+1)+"</strong> / <strong>"+HotSpotApp.AppData.ShowScenes+"</strong",$(n).hide().appendTo(HS_hotSpot).fadeIn(500)),HotSpotApp.updateProgress(),HotSpotApp.buildHotspots(),$("#HS_imageMap").mapster(HotSpotApp.normalState),HotSpotApp.fitImage(),HotSpotApp.buildActivityButtons()},HotSpotApp.buildActivityButtons=function(){var t=document.createElement("div");t.id="HS_buttonSetFull",$(t).hide().appendTo(HS_hotSpot).fadeIn(500),t.appendChild(HotSpotApp.nextButton),document.getElementById("HS_nextButton").disabled=!0,$("#HS_nextButton").hide(),HotSpotApp.sceneNum<HotSpotApp.maxScenes-1?$(".HS_buttonLabel").html("Next Scene"):!1===HotSpotApp.noPost?$(".HS_buttonLabel").html("Continue"):$(".HS_buttonLabel").html("Restart Activity")},HotSpotApp.clearStage=function(){$("#HS_appContainer").empty()},HotSpotApp.buildHotspots=function(){for(i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots.length;i++){var t=[],e="";if("circle"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType){var p=Math.PI/20,o=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].xPos),n=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].yPos),a=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].radius);for(theta=0;theta<2*Math.PI;theta+=p)x=o+a*Math.cos(theta),y=n-a*Math.sin(theta),t.push(x),t.push(y);e=t.join()}else if("rectangle"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType){var s=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeWidth),c=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeHeight);x=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].xPos),y=parseInt(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].yPos);var S=x+s,l=y+c;t.push(x),t.push(y),t.push(S),t.push(y),t.push(S),t.push(l),t.push(x),t.push(l),e=t.join()}else"custom"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].shapeType&&(e=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].coords);var A=document.createElement("area");A.setAttribute("class","HS_areaMap"),A.id=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].id,A.alt="Hot Spot Number "+(i+1)+" Uncompleted. "+HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpots[i].desc+" Opens a pop up window.",A.title="Item Found",A.setAttribute("role","link"),A.setAttribute("aria-selected",!1),A.href="javascript:;",A.coords=e,A.shape="poly",A.onfocus=function(){!1===HotSpotApp.AppData.highlight&&$(this).addClass("highlightable"),this.setAttribute("aria-selected",!0),$(this).mouseover()},A.onblur=function(){!1===HotSpotApp.AppData.highlight&&$(this).removeClass("highlightable"),this.setAttribute("aria-selected",!1),$(this).mouseleave()},A.onclick=function(){HotSpotApp.buildPopUp(this)},A.onmouseleave=function(){!1===HotSpotApp.AppData.highlight&&$(".HS_areaMap").each(function(){$(this).hasClass("highlightable")&&$(this).removeClass("highlightable")}),this.setAttribute("aria-selected",!1)},!0===HotSpotApp.AppData.highlight&&$(A).addClass("highlightable"),HS_imageMapAreas.appendChild(A)}},HotSpotApp.hideHotspots=function(){$(".HS_areaMap").each(function(){this.setAttribute("tabindex","-1")}),document.getElementById("HS_nextButton").setAttribute("tabindex","-1")},HotSpotApp.showHotspots=function(){$(".HS_areaMap").each(function(){this.removeAttribute("tabindex")}),document.getElementById("HS_nextButton").removeAttribute("tabindex")},HotSpotApp.fitImage=function(){var t=$("#HS_hotSpot").width();t>HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.imgWidth&&(t=HotSpotApp.Scenes[HotSpotApp.sceneNum].Background.imgWidth,$("#HS_hotSpot").css("width",t)),$("#HS_imageMap").mapster("resize",t,0,0),!0===HotSpotApp.activeActivity&&$(".HS_MediaEmbeddedVideo").each(function(){this.setAttribute("height",.5625*$(HS_questionContainer).width())})},HotSpotApp.buildPopUp=function(t){HotSpotApp.hideHotspots();var e,p,o,n=t.id;if(!1===HotSpotApp.activeActivity){HotSpotApp.activeActivity=!0;var a=t.coords.split(",");x=a[0],y=a[1];var s=$("#HS_imageMap").width()/2,c=$("#HS_instructions").outerHeight(),S=$("#HS_instructions").outerHeight(!0),l=$("#HS_progress").outerHeight(),A=$("#HS_progress").outerHeight(!0);c+=S=(S-c)/2,l+=A=(A-l)/2,($("#HS_hotSpot").width()-2*s)/2,(HS_questionContainer=document.createElement("div")).id="HS_questionContainer";var r=document.createElement("div");for(r.id="HS_popupBackground",$(r).hide().appendTo(topLevelBody).fadeIn(300),$(HS_questionContainer).hide().appendTo(topLevelBody).fadeIn(300),$(window.top.document.body).css("overflow","hidden"),i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;i++)HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].key===n&&(e=null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].popUpName?HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].popUpName:"Pop Up Activity");var d=document.createElement("div");d.id="HS_popUpButtonSet",HS_questionContainer.appendChild(d);var H=document.createElement("button");H.id="HS_closeButton",H.alt="Close the pop up window",H.setAttribute("title","Finishes and Closes the Pop Up Window"),H.onclick=function(){closePopup(n)},d.appendChild(H),(HS_question=document.createElement("div")).id="HS_question",HS_questionContainer.appendChild(HS_question);var u=document.createElement("h"+(HotSpotApp.headingLevel+1));u.id="HS_popUpHeader",u.innerHTML=e,HS_question.appendChild(u);var h=document.createElement("div");h.id="HS_bottomButtonSet",HS_questionContainer.appendChild(h);var m=document.createElement("button");m.id="HS_finishButton",m.setAttribute("class","HS_popUpButton"),m.setAttribute("title","Finishes and Closes the Pop Up Window"),m.onclick=function(){closePopup(n)};var v=document.createElement("span");for(v.setAttribute("class","HS_buttonLabel"),v.innerHTML="Continue",m.appendChild(v),h.appendChild(m),i=0;i<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent.length;i++)if(HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].key===n)if("presentation"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].activityType){if("none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia)for(j=0;j<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia.length;j++)HotSpotApp.EmbedMedia("window",HS_question,HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].hotSpotMedia[j])}else if("assessment"===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].activityType){H.setAttribute("title","Closes the Pop Up Window"),p=i,$(topLevelDocument).find("#HS_finishButton").disabled=!0,$(topLevelDocument).find("#HS_finishButton").hide();var g=document.createElement("p");g.id="HS_quizText",g.innerHTML=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].questionText,HS_question.appendChild(g);var b=document.createElement("fieldset");for(b.id="HS_fieldSet",b.innerHTML="<legend>Answers:</legend>",HS_question.appendChild(b),j=0;j<HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers.length;j++){!0===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers[j].correct&&(o=j);var C=document.createElement("div");C.setAttribute("class","HS_answer"),$(C).click(function(){$(this.firstChild).prop("checked",!0),_.removeAttribute("disabled")});var f=document.createElement("input");f.setAttribute("class","HS_input"),f.setAttribute("type","radio"),f.setAttribute("name","qu"),f.setAttribute("value",j),f.id="qu"+j;var M=document.createElement("label");M.setAttribute("for","qu"+j),M.setAttribute("class","HS_label"),M.innerHTML=HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[i].answers[j].answerText,C.appendChild(f),C.appendChild(M),b.appendChild(C)}var _=document.createElement("button");_.id="HS_submitButton",_.setAttribute("class","HS_popUpButton"),_.setAttribute("title","Checks your answer"),_.setAttribute("disabled",""),_.href="#",_.onclick=function(){HotSpotApp.EvaluateScore(p,o)};var D=document.createElement("span");D.setAttribute("class","HS_buttonLabel"),D.innerHTML="Check Answer(s)",_.appendChild(D),$(_).prependTo(h),!0===HotSpotApp.correctCheck[i]&&(document.getElementById("HS_submitButton").disabled=!0,document.getElementById("HS_finishButton").disabled=!1,$("#HS_finishButton").fadeIn(500),$("#HS_submitButton").fadeOut(250),$(".HS_answer").each(function(t){if($(this).children("input").hide(),t===o){$(this).addClass("HS_userSelected"),$(this).children("input").prop("checked",!0),$(correct).hide().prependTo(this).fadeIn(500);var e=$(this).children("input").attr("value");if("none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].answers[e].feedback&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].answers[e].feedback&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].answers[e].feedback&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].answers[e].feedback){var n=document.createElement("div");n.id="HS_feedback",n.innerHTML='<p class="HS_feedbackText"><strong class="HS_feedbackTitle">Feedback: </strong><br>'+HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[p].answers[e].feedback+"</p>",$(n).hide().appendTo(HS_question).slideDown(500)}}else $(wrong).hide().prependTo(this).fadeIn(500)}))}}HotSpotApp.fitImage(),$("#HS_closeButton").length>0?$("#HS_closeButton").focus():$(parent.window.document).find("#HS_closeButton").focus()},HotSpotApp.EvaluateScore=function(t,e){var p=parseInt($(topLevelBody).find("input[name=qu]:checked").val());$(topLevelBody).find(".HS_answer").unbind("click"),$(topLevelBody).find(".HS_answer").addClass("disabled"),$(topLevelBody).find(".HS_input").attr("disabled","disabled"),$(topLevelBody).find(".HS_label").attr("disabled","disabled");var o=$(topLevelBody).find("#qu"+p).parent();if(topLevelDocument.getElementById("HS_submitButton").disabled=!0,topLevelDocument.getElementById("HS_finishButton").disabled=!1,$(topLevelDocument.getElementById("HS_finishButton")).fadeIn(500),$(topLevelDocument.getElementById("HS_submitButton")).fadeOut(250),$(o).addClass("HS_userSelected"),!0===HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].feedback&&"none"!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&null!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&void 0!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback&&""!==HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback){var n=document.createElement("div");n.id="HS_feedback",$(n).addClass("bg-light"),n.innerHTML='<p class="HS_feedbackText"><strong class="HS_feedbackTitle">Feedback:  </strong><br>'+HotSpotApp.Scenes[HotSpotApp.sceneNum].HotSpotContent[t].answers[p].feedback+"</p>",$(n).hide().appendTo(HS_question).slideDown(500)}p===e?(HotSpotApp.correctCheck[t]=!0,$("#HS_closeButton").attr("title","Finishes and Closes the Pop Up Window")):HotSpotApp.correctCheck[t]=!1,$(topLevelBody).find(".HS_answer").each(function(t,p){$(p).disabled=!0,t===e?$(correct).hide().prependTo(this).fadeIn(500):$(wrong).hide().prependTo(this).fadeIn(500)})},HotSpotApp.EmbedMedia=function(t,e,p){var o,n,i=document.createElement("div");switch(i.setAttribute("class","HS_Media"),p.type){case"link":(n=document.createElement("a")).setAttribute("class","HS_MediaLink"),n.setAttribute("href",p.src),n.setAttribute("target","_blank"),p.description?n.innerHTML=p.description:n.innerHTML="Link",i.appendChild(n);break;case"audio":(n=document.createElement("audio")).id=p.id,n.setAttribute("class","HS_MediaAudio"),n.setAttribute("target","_blank"),n.innerHTML='<source src="'+p.mp3+'" type="audio/mpeg"><source src="'+p.ogg+'" type="audio/ogg"><source src="'+p.wav+'" type="audio/wav"> Your browser does not support the audio tag.',i.appendChild(n);var a=document.createElement("button");a.setAttribute("class","HS_audioButton"),a.setAttribute("title","Play Audio Button"),a.onclick=function(){document.getElementById(p.id).play()},i.appendChild(a);break;case"image":"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink&&((o=document.createElement("a")).setAttribute("class","HS_MediaImage"),o.setAttribute("href",p.mediaLink),o.setAttribute("target","_blank")),n=document.createElement("img"),"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink||n.setAttribute("class","HS_MediaImage"),n.setAttribute("src",p.src),"window"===t?n.setAttribute("width","100%"):("none"!==p.width&&null!==p.width&&void 0!==p.width&&""!==p.width?n.setAttribute("width",p.width):n.setAttribute("width","420"),"none"!==p.height&&null!==p.height&&void 0!==p.height&&""!==p.height?n.setAttribute("height",p.height):n.setAttribute("height","315")),i.setAttribute("style","text-align:center;"),p.description&&n.setAttribute("alt",p.description),"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink?i.appendChild(n):(o.appendChild(n),i.appendChild(o));break;case"YouTubeVideo":(validSrc=HotSpotApp.validateYouTubeLink(p.src))&&((n=document.createElement("iframe")).setAttribute("class","HS_MediaEmbeddedVideo"),"window"===t?(n.setAttribute("width","100%"),n.setAttribute("height",.5625*$(HS_questionContainer).width())):("none"!==p.width&&null!==p.width&&void 0!==p.width&&""!==p.width?n.setAttribute("width",p.width):n.setAttribute("width","420"),"none"!==p.height&&null!==p.height&&void 0!==p.height&&""!==p.height?n.setAttribute("height",p.height):n.setAttribute("height","315")),n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("style","padding-bottom: 10px 0px;"),n.setAttribute("src",validSrc),i.setAttribute("style","text-align:center;"),p.description&&n.setAttribute("alt",p.description),i.appendChild(n),(o=document.createElement("a")).setAttribute("class","HS_MediaAltLink"),o.setAttribute("href",p.altLink),o.setAttribute("target","_blank"),o.innerHTML="Alternate Link.",i.appendChild(o));break;case"text":(n=document.createElement("p")).setAttribute("class","HS_MediaText"),n.setAttribute("target","_blank"),n.innerHTML=p.content,i.appendChild(n)}if(p.appendContentClasses&&0!==p.appendContentClasses.length)for(var s=0;s<p.appendContentClasses.length;s++)n.classList.add(p.appendContentClasses[s]);if(p.appendAltContentClasses&&0!==p.appendAltContentClasses.length)for(var c=0;c<p.appendAltContentClasses.length;c++)o.classList.add(p.appendAltContentClasses[c]);$(i).hide().appendTo(e).fadeIn(500)},HotSpotApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")&&(-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")&&"https://www.youtube.com/embed/"+(code=t.slice(t.indexOf("?v=")+3)):-1!==t.indexOf("https://www.youtube.com/embed/")&&link.slice(link.indexOf("src")+5,link.indexOf('"',link.indexOf("src")+5)))},HotSpotApp.updateProgress=function(){var t=0;for(i=0;i<HotSpotApp.allCompleted.length;i++)!0===HotSpotApp.allCompleted[i]&&t++;t===HotSpotApp.allCompleted.length&&(document.getElementById("HS_nextButton").disabled=!1,$("#HS_nextButton").fadeIn(500)),document.getElementById("HS_completed").innerHTML=t},HotSpotApp.shuffle=function(t){for(var e,p,o=t.length;o;)p=Math.floor(Math.random()*o--),e=t[o],t[o]=t[p],t[p]=e;return t},HotSpotApp.establishScorm=function(){console.log("Getting SCORM API..."),$.getScript("../../assets/facilitator-tools/Hotspot/thirdpartylib/SCORM_API_wrapper.js").done(function(){console.log("SCORM API successfully loaded to go..."),HotSpotApp.SCORMConnectionInterval=setInterval(HotSpotApp.connectionAttempt,500)}).fail(function(){console.log("Unable to load SCORM API."),HotSpotApp.SCORMEnabled=!1})},HotSpotApp.connectionAttempt=function(){if(HotSpotApp.SCORMConnectionAttempts++,pipwerks.SCORM.connection.initialize()){clearInterval(HotSpotApp.SCORMConnectionInterval),console.log("SCORM connection made."),pipwerks.SCORM.data.set("cmi.score.min",0);var t=HotSpotApp.findMaxQuestions();pipwerks.SCORM.data.set("cmi.score.max",t),console.log("Max question(s) is "+t),HotSpotApp.SCORMConnected=!0}else HotSpotApp.SCORMConnectionAttempts>9&&(console.log("SCORM connection attempted "+HotSpotApp.SCORMConnectionAttempts+" times. Aborting."),HotSpotApp.SCORMConnected=!1,clearInterval(HotSpotApp.SCORMConnectionInterval))},HotSpotApp.CalculateScore=function(){for(var t=0;t<HotSpotApp.allCompletedArr.length;t++)for(var e=0;e<HotSpotApp.allCompletedArr[t].length;e++)!0===HotSpotApp.allCompletedArr[t][e]?HotSpotApp.score++:HotSpotApp.score=HotSpotApp.score;for(var p=0;p<HotSpotApp.correctCheckArr.length;p++)for(var o=0;o<HotSpotApp.correctCheckArr[p].length;o++)!0===HotSpotApp.correctCheckArr[p][o]?HotSpotApp.score++:HotSpotApp.score=HotSpotApp.score},HotSpotApp.findMaxQuestions=function(){for(var t=0,e=0;e<HotSpotApp.maxScenes;e++)for(var p=0;p<HotSpotApp.Scenes[e].HotSpotContent.length;p++)"assessment"===HotSpotApp.Scenes[e].HotSpotContent[p].activityType?t+=2:t++;return t},HotSpotApp.onComplete=function(){if(HotSpotApp.SCORMConnected){HotSpotApp.CalculateScore();var t=pipwerks.SCORM.data.get("cmi.score.raw");(HotSpotApp.score>t||""!==t)&&(pipwerks.SCORM.data.set("cmi.score.raw",HotSpotApp.score),pipwerks.SCORM.data.set("cmi.completion_status","completed"),pipwerks.SCORM.data.set("cmi.exit","suspend"),pipwerks.SCORM.data.save(),pipwerks.SCORM.connection.terminate())}};