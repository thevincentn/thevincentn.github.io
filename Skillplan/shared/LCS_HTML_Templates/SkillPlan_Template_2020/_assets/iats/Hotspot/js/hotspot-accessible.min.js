var a,i,j,k,HS_content,HS_activityType,HS_feedback,questionFile,validSrc,code,link,D2LDEBUG=!1,HotSpotApp={AppData:null,sceneNum:0,maxScenes:null,containerRef:null,mobileDevice:!1,currentAttempts:0,questionNumber:1,allCompleted:[],correctCheck:[]};function d2log(t){void 0!==D2LDEBUG&&D2LDEBUG&&console.log(t)}HotSpotApp.setupApp=function(t,e){questionFile=t,null!==document.getElementById(e)?(HotSpotApp.containerRef=document.getElementById(e),HotSpotApp.getAppData(HotSpotApp.buildApp)):d2log("ERROR: Missing specified DOM object in HotSpotApp.setupApp().")},HotSpotApp.getAppData=function(t){$.getJSON(questionFile,function(e){HotSpotApp.AppData=e,t(HotSpotApp.AppData)}).fail(function(t){d2log("ERROR: Failed to load data from specified file. Ensure that the file path is correct and that JSON the JSON data is valid. (Use a validator like: http://jsonformatter.curiousconcept.com/ )"),d2log(t)})},HotSpotApp.buildApp=function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(HotSpotApp.mobileDevice=!0),parseInt(HotSpotApp.AppData.ShowScenes)>HotSpotApp.AppData.Scenes.length?HotSpotApp.maxScenes=HotSpotApp.AppData.Scenes.length:HotSpotApp.maxScenes=parseInt(HotSpotApp.AppData.ShowScenes),HotSpotApp.Scenes=HotSpotApp.AppData.Scenes,!0===HotSpotApp.AppData.Randomize&&HotSpotApp.shuffle(HotSpotApp.Scenes),HotSpotApp.buildAppFrame(),"none"===HotSpotApp.AppData.PreActivityText||null===HotSpotApp.AppData.PreActivityText||void 0===HotSpotApp.AppData.PreActivityText||""===HotSpotApp.AppData.PreActivityText)if("none"===HotSpotApp.AppData.PreActivityMedia||null===HotSpotApp.AppData.PreActivityMedia||void 0===HotSpotApp.AppData.PreActivityMedia||""===HotSpotApp.AppData.PreActivityMedia)for(i=0;i<HotSpotApp.Scenes.length;i++)HotSpotApp.buildActivity(i);else HotSpotApp.buildPreActivity();else for(HotSpotApp.buildPreActivity(),i=0;i<HotSpotApp.Scenes.length;i++)HotSpotApp.buildActivity(i);"none"===HotSpotApp.AppData.PostActivityText||null===HotSpotApp.AppData.PostActivityText||void 0===HotSpotApp.AppData.PostActivityText||""===HotSpotApp.AppData.PostActivityText?"none"!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia&&HotSpotApp.buildPostActivity():HotSpotApp.buildPostActivity()},HotSpotApp.buildAppFrame=function(){var t=document.createElement("section");t.id="HS_container",(HS_content=document.createElement("section")).id="HS_content";var e=document.createElement("section");e.id="HS_header",e.innerHTML="<h1>"+HotSpotApp.AppData.ActivityName+"</h1>",t.appendChild(HS_content),HS_content.appendChild(e),$(t).appendTo(HotSpotApp.containerRef)},HotSpotApp.buildPreActivity=function(){var t=document.createElement("div");t.setAttribute("class","HS_pageCont"),HS_content.appendChild(t);var e=document.createElement("h2");if(e.setAttribute("class","HS_pageHeader"),e.innerHTML="Pre Activity Page Content",t.appendChild(e),"none"!==HotSpotApp.AppData.PreActivityText&&null!==HotSpotApp.AppData.PreActivityText&&void 0!==HotSpotApp.AppData.PreActivityText&&""!==HotSpotApp.AppData.PreActivityText){var p=document.createElement("p");p.id="HS_preActivityText",p.innerHTML=HotSpotApp.AppData.PreActivityText,t.appendChild(p)}if("none"!==HotSpotApp.AppData.PreActivityMedia&&null!==HotSpotApp.AppData.PreActivityMedia&&void 0!==HotSpotApp.AppData.PreActivityMedia&&""!==HotSpotApp.AppData.PreActivityMedia)for(i=0;i<HotSpotApp.AppData.PreActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",t,HotSpotApp.AppData.PreActivityMedia[i])},HotSpotApp.buildPostActivity=function(){var t=document.createElement("div");t.setAttribute("class","HS_pageCont"),HS_content.appendChild(t);var e=document.createElement("h2");if(e.setAttribute("class","HS_pageHeader"),e.innerHTML="Post Activity Page Content",t.appendChild(e),"none"!==HotSpotApp.AppData.PostActivityText&&null!==HotSpotApp.AppData.PostActivityText&&void 0!==HotSpotApp.AppData.PostActivityText&&""!==HotSpotApp.AppData.PostActivityText){var p=document.createElement("p");p.id="HS_postActivityText",p.innerHTML=HotSpotApp.AppData.PostActivityText,t.appendChild(p)}if("none"!==HotSpotApp.AppData.PostActivityMedia&&null!==HotSpotApp.AppData.PostActivityMedia&&void 0!==HotSpotApp.AppData.PostActivityMedia&&""!==HotSpotApp.AppData.PostActivityMedia)for(i=0;i<HotSpotApp.AppData.PostActivityMedia.length;i++)HotSpotApp.EmbedMedia("page",t,HotSpotApp.AppData.PostActivityMedia[i])},HotSpotApp.buildActivity=function(t){var e=document.createElement("div");e.setAttribute("class","HS_pageCont"),HS_content.appendChild(e);var p=document.createElement("h2");p.setAttribute("class","HS_pageHeader"),p.innerHTML="Activity "+(t+1)+": "+HotSpotApp.Scenes[t].SceneName,e.appendChild(p);var i=document.createElement("p");for(i.setAttribute("class","HS_pageContext"),i.innerHTML="<strong>Original Image: "+HotSpotApp.Scenes[t].Background.alt+"</strong>",e.appendChild(i),a=0;a<HotSpotApp.Scenes[t].HotSpotContent.length;a++)HotSpotApp.buildSceneContent(t,a,e)},HotSpotApp.buildSceneContent=function(t,e,p){var i,o,n=document.createElement("div");n.setAttribute("class","HS_questionCont"),$(n).appendTo(p),i="none"!==HotSpotApp.Scenes[t].HotSpotContent[e].popUpName&&null!==HotSpotApp.Scenes[t].HotSpotContent[e].popUpName&&void 0!==HotSpotApp.Scenes[t].HotSpotContent[e].popUpName&&""!==HotSpotApp.Scenes[t].HotSpotContent[e].popUpName?"Interactive Element "+(e+1)+": "+HotSpotApp.Scenes[t].HotSpotContent[e].popUpName:"Pop Up Activity";var a=document.createElement("div");a.setAttribute("class","HS_question"),n.appendChild(a);var c=document.createElement("h3");c.setAttribute("class","HS_popUpHeader"),c.innerHTML=i,a.appendChild(c);var A=document.createElement("p");if(A.setAttribute("class","HS_popUpContext"),A.innerHTML="<strong>Element Description: "+HotSpotApp.Scenes[t].HotSpots[e].desc+"</strong>",a.appendChild(A),"presentation"===HotSpotApp.Scenes[t].HotSpotContent[e].activityType)for((HS_activityType=document.createElement("h4")).setAttribute("class","HS_activityType"),HS_activityType.innerHTML="Embedded Content:",a.appendChild(HS_activityType),k=0;k<HotSpotApp.Scenes[t].HotSpotContent[e].hotSpotMedia.length;k++)HotSpotApp.EmbedMedia("window",a,HotSpotApp.Scenes[t].HotSpotContent[e].hotSpotMedia[k]);else if("assessment"===HotSpotApp.Scenes[t].HotSpotContent[e].activityType){(HS_activityType=document.createElement("h4")).setAttribute("class","HS_activityType"),HS_activityType.innerHTML="Assessment Question:",a.appendChild(HS_activityType),e;var d=document.createElement("p");d.setAttribute("class","HS_quizText"),d.innerHTML=HotSpotApp.Scenes[t].HotSpotContent[e].questionText,a.appendChild(d);var s=document.createElement("fieldset");for(s.id="HS_fieldSet"+HotSpotApp.questionNumber,s.innerHTML="<legend>Answers:</legend>",a.appendChild(s),j=0;j<HotSpotApp.Scenes[t].HotSpotContent[e].answers.length;j++){!0===HotSpotApp.Scenes[t].HotSpotContent[e].answers[j].correct&&(o=j);var r=document.createElement("div");r.setAttribute("class","HS_answer");var l=document.createElement("input");l.setAttribute("class","HS_input"),l.setAttribute("type","radio"),l.setAttribute("name","qu"+HotSpotApp.questionNumber),l.setAttribute("value",j),l.id="qu"+t+e+j;var S=document.createElement("label");S.setAttribute("for","qu"+t+e+j),S.setAttribute("class","HS_label"),S.innerHTML=HotSpotApp.Scenes[t].HotSpotContent[e].answers[j].answerText,r.appendChild(l),r.appendChild(S),s.appendChild(r)}var u=document.createElement("button");u.id="HS_submitButton"+HotSpotApp.questionNumber,u.setAttribute("class","HS_popUpButton"),u.setAttribute("title","Submits your answer to the question"),u.href="#",u.onclick=function(){var p=this.id.substr(15);HotSpotApp.Eval(p,t,e,this.parentNode,o)};var H=document.createElement("span");H.setAttribute("class","HS_buttonLabel"),H.innerHTML="Submit Answer",u.appendChild(H),a.appendChild(u);var b=document.createElement("button");b.id="HS_resetQuestion"+HotSpotApp.questionNumber,b.setAttribute("class","HS_popUpButton"),b.setAttribute("title","Resets the question"),b.href="#",b.onclick=function(){var t=this.id.substr(16);HotSpotApp.Reset(t)};var m=document.createElement("span");m.setAttribute("class","HS_buttonLabel"),m.innerHTML="Reset Question",b.appendChild(m),a.appendChild(b),b.disabled=!0,HotSpotApp.questionNumber++}},HotSpotApp.Eval=function(t,e,p,i,o){var n=parseInt($("#HS_fieldSet"+t).find('input[type="radio"]:checked').val());if(null!==n){document.getElementById("HS_submitButton"+t).disabled=!0,document.getElementById("HS_resetQuestion"+t).disabled=!1,$("#HS_resetQuestion"+t).focus(),!0===HotSpotApp.Scenes[e].HotSpotContent[p].feedback&&"none"!==HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].feedback&&null!==HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].feedback&&void 0!==HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].feedback&&""!==HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].feedback?((HS_feedback=document.createElement("p")).setAttribute("class","HS_feedback"),HS_feedback.innerHTML="<strong>You Chose: "+HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].answerText+"</strong></br><strong>Correct Answer: "+HotSpotApp.Scenes[e].HotSpotContent[p].answers[o].answerText+"</strong></br><strong>Feedback: "+HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].feedback+"</strong>",i.appendChild(HS_feedback)):((HS_feedback=document.createElement("p")).setAttribute("class","HS_feedback"),HS_feedback.innerHTML="<strong>You Chose: "+HotSpotApp.Scenes[e].HotSpotContent[p].answers[n].answerText+"</strong></br><strong>Correct Answer: "+HotSpotApp.Scenes[e].HotSpotContent[p].answers[o].answerText+"</strong>",i.appendChild(HS_feedback)),$("#HS_fieldSet"+t+"> .HS_answer").each(function(t){t===o?$('<img class="correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Njk0QjdFOUFFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Njk0QjdFOUJFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5OEVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OTRCN0U5OUVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PllHhcQAAACASURBVHjaYmIgB2zx7wBjIGAhSzMDQzmUzcBEtmYI4GeiQPMMIM5iokQzg8/G/0xQBYzkaAZxmKCap8FClRTNEANAmhkYMsAKkQ0hQjMsGj8i8UGGINgENIMAIw7bGIjRDPMCA1CyAkh2kqoZYQB2QwhqRngBM+T5idEMAgABBgBezD9OGUJHCwAAAABJRU5ErkJggg==" alt="right check mark" disabled/>').appendTo(this):$('<img class="wrong" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REI5RDZEMTdFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REI5RDZEMThFQUFGMTFFNDg4MjBGN0M3OURFRTYyRDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OTRCN0U5Q0VBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQjlENkQxNkVBQUYxMUU0ODgyMEY3Qzc5REVFNjJENiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuBTV64AAAC/SURBVHjahJPRDcIwDETtCLEAjARSv/iL0hXoQGUFoi5QCUaCBfgJDnJQmubSSlak691zaqscQqA3n/dENEnNR3reCDwvOl3l6KTsITw+UTP6LoYvUqOaUHhU35T0BJgz7wqShan0/wB67aEGqYSH/DM5zoCZUScv5WrhmFsBAKTaGQIUci86ewn3uScBDJi2K2SHtmM2pu1b21kAwLR7tJ0FoLWq1orzG3Ro2gDy9+/0tFv/QtSlcwrbpH8FGAC2umDxE/BZxwAAAABJRU5ErkJggg==" alt="wrong x" disabled/>').appendTo(this)})}},HotSpotApp.Reset=function(t){$("#HS_fieldSet"+t+"> .HS_answer").each(function(){$(this.lastChild).remove(),$(this.firstChild).removeAttr("checked")});var e=document.getElementById("HS_fieldSet"+t).parentNode.lastChild;$(e).hasClass("HS_feedback")&&e.remove(),document.getElementById("HS_submitButton"+t).disabled=!1,document.getElementById("HS_resetQuestion"+t).disabled=!0,$("#HS_submitButton"+t).focus()},HotSpotApp.EmbedMedia=function(t,e,p){var i,o,n=document.createElement("div");switch(n.setAttribute("class","HS_Media"),p.type){case"link":(o=document.createElement("a")).setAttribute("class","HS_MediaLink"),o.setAttribute("href",p.src),o.setAttribute("target","_blank"),p.description?o.innerHTML=p.description:o.innerHTML="Link",n.appendChild(o);break;case"audio":(o=document.createElement("audio")).id=p.id,o.setAttribute("class","HS_MediaAudio"),o.setAttribute("target","_blank"),o.innerHTML='<source src="'+p.mp3+'" type="audio/mpeg"><source src="'+p.ogg+'" type="audio/ogg"><source src="'+p.wav+'" type="audio/wav"> Your browser does not support the audio tag.',n.appendChild(o);var a=document.createElement("button");a.setAttribute("class","HS_audioButton"),a.setAttribute("title","Play Audio Button"),a.onclick=function(){document.getElementById(p.id).play()},n.appendChild(a);break;case"image":"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink&&((i=document.createElement("a")).setAttribute("class","HS_MediaImage"),i.setAttribute("href",p.mediaLink),i.setAttribute("target","_blank")),o=document.createElement("img"),"none"!==p.mediaLink&&null!==p.mediaLink&&void 0!==p.mediaLink&&""!==p.mediaLink||o.setAttribute("class","HS_MediaImage"),o.setAttribute("src",p.src),"window"===t?o.setAttribute("width","50%"):("none"!==p.width&&null!==p.width&&void 0!==p.width&&""!==p.width?o.setAttribute("width",p.width):o.setAttribute("width","420"),"none"!==p.height&&null!==p.height&&void 0!==p.height&&""!==p.height?o.setAttribute("height",p.height):o.setAttribute("height","315")),n.setAttribute("style","text-align:center;"),p.description&&o.setAttribute("alt",p.description),"none"===p.mediaLink||null===p.mediaLink||void 0===p.mediaLink||""===p.mediaLink?n.appendChild(o):(i.appendChild(o),n.appendChild(i));break;case"YouTubeVideo":(validSrc=HotSpotApp.validateYouTubeLink(p.src))&&((o=document.createElement("iframe")).setAttribute("class","HS_MediaEmbeddedVideo"),o.setAttribute("width","420"),o.setAttribute("height","315"),o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen","true"),o.setAttribute("style","padding-bottom: 10px 0px;"),o.setAttribute("src",validSrc),n.setAttribute("style","text-align:center;"),p.description&&o.setAttribute("alt",p.description),n.appendChild(o),(i=document.createElement("a")).setAttribute("class","HS_MediaAltLink"),i.setAttribute("href",p.altLink),i.setAttribute("target","_blank"),i.innerHTML="Alternate Link.",n.appendChild(i));break;case"text":(o=document.createElement("p")).setAttribute("class","HS_MediaText"),o.setAttribute("target","_blank"),o.innerHTML=p.content,n.appendChild(o)}e.appendChild(n)},HotSpotApp.validateYouTubeLink=function(t){return-1!==t.indexOf("www.youtube.com")&&(-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")&&"https://www.youtube.com/embed/"+(code=t.slice(t.indexOf("?v=")+3)):-1!==t.indexOf("https://www.youtube.com/embed/")&&link.slice(link.indexOf("src")+5,link.indexOf('"',link.indexOf("src")+5)))},HotSpotApp.shuffle=function(t){for(var e,p,i=t.length;i;)p=Math.floor(Math.random()*i--),e=t[i],t[i]=t[p],t[p]=e;return t},HotSpotApp.onComplete=function(){};