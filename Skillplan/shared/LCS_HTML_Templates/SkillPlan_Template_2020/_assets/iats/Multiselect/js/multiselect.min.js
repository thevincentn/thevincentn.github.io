(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.GraphicSelectApp=function(){function e(){this.HandleResizeEvent=t(this.HandleResizeEvent,this),this.mergeObjectData=t(this.mergeObjectData,this),this.msieversion=t(this.msieversion,this),this.buildAnswerReferences=t(this.buildAnswerReferences,this),this.shuffle=t(this.shuffle,this),this.validateYouTubeLink=t(this.validateYouTubeLink,this),this.EmbedMedia=t(this.EmbedMedia,this),this.CheckAllSubmits=t(this.CheckAllSubmits,this),this.buildReportButtons=t(this.buildReportButtons,this),this.buildReport=t(this.buildReport,this),this.BuildFeedback=t(this.BuildFeedback,this),this.BuildResultTable=t(this.BuildResultTable,this),this.GetQuestionScore=t(this.GetQuestionScore,this),this.GetQuestionTotal=t(this.GetQuestionTotal,this),this.BuildMiniReport=t(this.BuildMiniReport,this),this.GenerateQuestionFeedback=t(this.GenerateQuestionFeedback,this),this.ResetQuestionAnswers=t(this.ResetQuestionAnswers,this),this.CheckAnswer=t(this.CheckAnswer,this),this.HandleKeyboardSelection=t(this.HandleKeyboardSelection,this),this.HandleSelection=t(this.HandleSelection,this),this.addQuestions=t(this.addQuestions,this),this.buildTable=t(this.buildTable,this),this.buildInstructions=t(this.buildInstructions,this),this.toggleInstructions=t(this.toggleInstructions,this),this.buildActivityButtons=t(this.buildActivityButtons,this),this.buildActivity=t(this.buildActivity,this),this.buildPostActivityButtons=t(this.buildPostActivityButtons,this),this.buildPostActivity=t(this.buildPostActivity,this),this.buildPreActivityButtons=t(this.buildPreActivityButtons,this),this.buildPreActivity=t(this.buildPreActivity,this),this.clearStage=t(this.clearStage,this),this.loadButtons=t(this.loadButtons,this),this.buildAppFrame=t(this.buildAppFrame,this),this.buildApp=t(this.buildApp,this),this.getAppData=t(this.getAppData,this),this.setupApp=t(this.setupApp,this),this.resetActivityData=t(this.resetActivityData,this)}return e.prototype._defaultQuestionFile="data/multiselectDefaultData.txt",e.prototype._questionFile=void 0,e.prototype._appData=void 0,e.prototype._currentAttempts=0,e.prototype._containerRef=null,e.prototype._appContainer=void 0,e.prototype._mobileDevice=!1,e.prototype._finalReport=!1,e.prototype._continuousFeedback=null,e.prototype._reportFeedback=null,e.prototype._endReport=null,e.prototype._tabIndex=2,e.prototype._currentQuestion=0,e.prototype._pageNum=0,e.prototype._restartButton=null,e.prototype._startButton=null,e.prototype._nextButton=null,e.prototype._backButton=null,e.prototype._instructionButton=null,e.prototype._submitAllButton=null,e.prototype._submitInterval=null,e.prototype._usingIE=!1,e.prototype._questionCheck=[],e.prototype._allCheck=[],e.prototype._correctAnswers=[],e.prototype._allCorrect=[],e.prototype._submitCheck=[],e.prototype._headingLevel=1,e.prototype._noPost=null,e.prototype.resetActivityData=function(){this._currentQuestion=0,this._pageNum=0,this._finalReport=!1,this._submitInterval=null,this._tabIndex=2,this._allCheck=[],this._allCorrect=[],this._submitCheck=[]},e.prototype.setupApp=function(t,e){var i;this._questionFile=t,null!==document.getElementById(e)?(this._containerRef=document.getElementById(e),this.getAppData((i=this,function(){return i.getAppData(i.buildApp,i._questionFile)}),this._defaultQuestionFile)):this.d2log("Error! Missing Proper DOM object.")},e.prototype.getAppData=function(t,e){var i;$.getJSON(e,(i=this,function(e){i._appData?i._appData=i.mergeObjectData(e.valueOf(),i._appData.valueOf()):i._appData=e,t(i._appData)})).fail(function(t){return function(e){t.d2log("ERROR!!: failed to load data from specified file. Ensure file is at that location and that JSON data is vaild. (tip: use a vaildator like: http://jsonformatter.curiousconcept.com/ )"),t.d2log(e)}}(this))},e.prototype.buildApp=function(){var t;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this._mobileDevice=!0),this._usingIE=this.msieversion(),t=parseInt(this._appData.HeadingLevel),(isNaN(t)||t<1)&&(t=1),t>2&&(t=2),this._headingLevel=t,this._continuousFeedback=this._appData.ProvideContinuous,this._reportFeedback=this._appData.ProvideQuestionReport,this._endReport=this._appData.ProvideEndReport,!1===this._continuousFeedback&&("all"===this._appData.QuestionDisplay?!1===this._endReport&&(this._continuousFeedback=!0):"single"===this._appData.QuestionDisplay&&!1===this._reportFeedback&&!1===this._endReport&&(this._continuousFeedback=!0)),this.Questions=this._appData.Questions,!0===this._appData.Randomize&&this.shuffle(this.Questions),!("none"!==this._appData.PostActivityText&&void 0!==this._appData.PostActivityText&&null!==this._appData.PostActivityText&&""!==this._appData.PostActivityText||"none"!==this._appData.PostActivityMedia&&void 0!==this._appData.PostActivityMedia&&null!==this._appData.PostActivityMedia&&""!==this._appData.PostActivityMedia)?this._noPost=!0:this._noPost=!1,this.buildAppFrame(),this.loadButtons(),this.buildAnswerReferences(),"none"===this._appData.PreActivityText&&"none"===this._appData.PreActivityMedia?this.buildActivity():this.buildPreActivity(),this.HandleResizeEvent(),$(this._containerRef).addClass("rs_preserve")},e.prototype.buildAppFrame=function(){var t,e,i;(t=document.createElement("section")).id="GS_container",(e=document.createElement("section")).id="GS_content",(i=document.createElement("section")).id="GS_header",i.innerHTML="<h"+this._headingLevel+">"+this._appData.ActivityName+"</h"+this._headingLevel+">",t.appendChild(e),$(t).appendTo(this._containerRef),$(i).hide().appendTo(e).slideDown(500,"swing"),this._appContainer=document.createElement("div"),this._appContainer.id="GS_appContainer",e.appendChild(this._appContainer)},e.prototype.loadButtons=function(){var t,e,i,s,n,a,o,r,l,c,d,u,p;(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(o=document.createElement("button")).id="GS_restartButton",o.setAttribute("class","GS_button"),o.setAttribute("title","Restarts the Activity"),o.onclick=(p=this,function(){p.clearStage(),p.resetActivityData(),p.buildAnswerReferences(),"none"===p._appData.PreActivityText?"none"===p._appData.PreActivityMedia?(p.buildActivity(),p.scrollViewToTop()):(p.buildPreActivity(),p.scrollViewToTop()):p.buildPreActivity()}),(r=document.createElement("span")).setAttribute("class","GS_buttonLabel"),r.innerHTML="Restart Activity",o.appendChild(i),o.appendChild(r),this._restartButton=o,(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(l=document.createElement("button")).id="GS_startButton",l.setAttribute("class","GS_button"),l.setAttribute("title","Starts the Activity"),l.onclick=function(t){return function(){t.clearStage(),t._pageNum++,t.buildActivity(),t.scrollViewToTop()}}(this),(c=document.createElement("span")).setAttribute("class","GS_buttonLabel"),c.innerHTML="Start Activity",l.appendChild(i),l.appendChild(c),this._startButton=l,(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(n=document.createElement("button")).id="GS_nextButton",n.setAttribute("class","GS_button"),n.setAttribute("title","Moves to the Next Part of the Activity"),n.onclick=function(t){return function(){var e;if(t._currentQuestion++,t._pageNum++,"single"===t._appData.QuestionDisplay)!1===t._reportFeedback&&!0===t._endReport&&!1===t._finalReport&&t.CheckAnswer(t._currentQuestion-1,"next"),t._currentQuestion<t.Questions.length?(t.clearStage(),t.buildActivity(),t.scrollViewToTop()):!0===t._endReport?!1===t._finalReport?(t._finalReport=!0,t.clearStage(),t.buildReport()):!0===t._noPost?(t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?(t.buildActivity(),t.scrollViewToTop()):(t.buildPreActivity(),t.scrollViewToTop())):(t.clearStage(),t.buildPostActivity(),t._currentAttempts++,t.scrollViewToTop()):!0===t._noPost?(t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?(t.buildActivity(),t.scrollViewToTop()):(t.buildPreActivity(),t.scrollViewToTop())):(t.clearStage(),t.buildPostActivity(),t.scrollViewToTop(),t._currentAttempts++);else if("all"===t._appData.QuestionDisplay){for(e=0;e<t.Questions.length;)t.CheckAnswer(e,"next"),e++;clearInterval(t._submitInterval),!1===t._finalReport&&!0===t._endReport?(t._finalReport=!0,t.clearStage(),t.buildReport()):!0===t._noPost?(t.clearStage(),t.resetActivityData(),t.buildAnswerReferences(),"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?(t.buildActivity(),t.scrollViewToTop()):(t.buildPreActivity(),t.scrollViewToTop())):(t.clearStage(),t.buildPostActivity(),t.scrollViewToTop(),t._currentAttempts++)}t.HandleResizeEvent()}}(this),(a=document.createElement("span")).setAttribute("class","GS_buttonLabel"),n.appendChild(i),n.appendChild(a),this._nextButton=n,(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(t=document.createElement("button")).id="GS_backButton",t.setAttribute("class","GS_button"),t.setAttribute("title","Moves to the Previous Part of the Activity"),t.onclick=function(t){return function(){t.clearStage(),t._currentQuestion--,t._pageNum--,t._currentQuestion<0&&(t._currentQuestion=0),0===t._pageNum?"none"===t._appData.PreActivityText&&"none"===t._appData.PreActivityMedia?(t.buildActivity(),t.scrollViewToTop()):(t.buildPreActivity(),t.scrollViewToTop()):(t.buildActivity(),t.scrollViewToTop())}}(this),(e=document.createElement("span")).setAttribute("class","GS_buttonLabel"),e.innerHTML="Go Back",t.appendChild(i),t.appendChild(e),this._backButton=t,(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(s=document.createElement("button")).id="GS_instructionButton",s.alt="Instruction toggle",s.setAttribute("class","GS_button"),s.setAttribute("title","Toggles the Instructions"),s.onclick=function(t){return function(){t.toggleInstructions()}}(this),this._instructionButton=s,(i=document.createElement("div")).setAttribute("class","GS_buttonIcon"),(d=document.createElement("button")).id="GS_submitAllButton",d.setAttribute("class","GS_button"),d.setAttribute("title","Submits all answers at once"),d.onclick=function(t){return function(){var e;for(e=0;e<t.Questions.length;)!1===document.getElementById("GS_submitButton"+e).disabled&&$("#GS_submitButton"+e).click(),e++;document.getElementById("GS_nextButton").disabled=!1,clearInterval(t._submitInterval)}}(this),(u=document.createElement("span")).setAttribute("class","GS_buttonLabel"),u.innerHTML="Submit All",d.appendChild(i),d.appendChild(u),this._submitAllButton=d},e.prototype.clearStage=function(){$("#GS_appContainer").empty()},e.prototype.buildPreActivity=function(){var t,e,i,s,n;if(e=!1,i=!1,"none"!==this._appData.PreActivityText&&((t=document.createElement("p")).id="GS_preActivityText",t.innerHTML=this._appData.PreActivityText,$(t).hide().appendTo(this._appContainer).fadeIn(500)),"none"!==this._appData.PreActivityMedia)for(s=0;s<this._appData.PreActivityMedia.length;)"image"===this._appData.PreActivityMedia[s].type?e=!0:"YouTubeVideo"===this._appData.PreActivityMedia[s].type&&(i=!0),this.EmbedMedia("page",this._appContainer,this._appData.PreActivityMedia[s]),s++;!1===i&&!1===e?this.buildPreActivityButtons():$(".embedMedia:last").one("load",(n=this,function(){n.buildPreActivityButtons(),n.HandleResizeEvent()})),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus(),this.scrollViewToTop()},e.prototype.buildPreActivityButtons=function(){var t;(t=document.createElement("div")).id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._startButton)},e.prototype.buildPostActivity=function(){var t,e,i,s,n;if(e=!1,i=!1,t=void 0,"none"!==this._appData.PostActivityText?((t=document.createElement("p")).id="GS_postActivityText",t.innerHTML=this._appData.PostActivityText,$(t).hide().appendTo(this._appContainer).fadeIn(500)):((t=document.createElement("p")).id="GS_postActivityText",t.innerHTML="You have completed the activity!",$(t).hide().appendTo(this._appContainer).fadeIn(500)),"none"!==this._appData.PostActivityMedia)for(s=0;s<this._appData.PostActivityMedia.length;)"image"===this._appData.PostActivityMedia[s].type?e=!0:"YouTubeVideo"===this._appData.PostActivityMedia[s].type&&(i=!0),this.EmbedMedia("page",this._appContainer,this._appData.PostActivityMedia[s]),s++;!1===i&&!1===e?this.buildPostActivityButtons():$(".embedMedia:last").one("load",(n=this,function(){n.buildPostActivityButtons(),n.HandleResizeEvent()})),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus(),this.scrollViewToTop()},e.prototype.buildPostActivityButtons=function(){var t;(t=document.createElement("div")).id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._restartButton)},e.prototype.buildActivity=function(){var t,e,i,s,n,a;if(e=!1,"all"===this._appData.QuestionDisplay&&!0===this._continuousFeedback&&!1===this._endReport){for(i=0;i<this.Questions.length;)this._submitCheck.push(!1),i++;this._submitInterval=setInterval(this.CheckAllSubmits,250)}this._tabIndex=2,(t=document.createElement("p")).id="GS_instructions","single"===this._appData.QuestionDisplay?a=!1===this._continuousFeedback&&!1===this._reportFeedback&&!0===this._endReport?this._appData.Instructions+'<br><br> <span class="GS_instruct_common">'+this._appData.Instruct_common+" "+this._appData.Instruct_01+" "+this._appData.Instructions_KeyUserText+"</span>":this._appData.Instructions+'<br><br> <span class="GS_instruct_common">'+this._appData.Instruct_common+" "+this._appData.Instruct_02+" "+this._appData.Instructions_KeyUserText+"</span>":"all"===this._appData.QuestionDisplay&&(a=!0===this._continuousFeedback&&!1===this._endReport?this._appData.Instructions+'<br><br> <span class="GS_instruct_common">'+this._appData.Instruct_common+" "+this._appData.Instruct_03+" "+this._appData.Instructions_KeyUserText+"</span>":this._appData.Instructions+'<br><br> <span class="GS_instruct_common">'+this._appData.Instruct_common+" "+this._appData.Instruct_04+" "+this._appData.Instructions_KeyUserText+"</span>"),t.innerHTML=a,$(t).hide().appendTo(this._appContainer).fadeIn(500);var o,r=document.createElement("span");for(r.id="GS_iToggle",r.setAttribute("tabindex","1"),$(r).addClass("iDown"),r.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>',$(r).click(function(){!0===$(this).hasClass("iDown")?($(this).removeClass("iDown"),$(this).addClass("iUp"),$("#GS_instructions").slideUp(500),this.innerHTML='&#9660;<span class="sr-only">Collapse instructions</span>'):($(this).addClass("iDown"),$(this).removeClass("iUp"),$("#GS_instructions").slideDown(500),this.innerHTML='&#9650;<span class="sr-only">Collapse instructions</span>')}),$(r).keyup(function(t){13===t.keyCode&&$(this).click()}),$(r).hide().appendTo(this._appContainer).fadeIn(500),this.buildTable(),this.addQuestions(),s=0;s<this._appData.Answers.length;)n=document.getElementById("head"+s),$(n.firstChild).hasClass("tableHeadImage")&&(e=!0),s++;!0===e?$(".tableHeadImage:last").one("load",(o=this,function(){o.buildActivityButtons()})):!1===e&&this.buildActivityButtons(),$("#head").attr("tabindex","1").css("outline","none"),$("#head").focus()},e.prototype.buildActivityButtons=function(){var t;(t=document.createElement("div")).id="GS_buttonSet",$(t).hide().appendTo(this._appContainer).fadeIn(500),!0===this._appData.AllowPrevious&&"single"===this._appData.QuestionDisplay&&this._pageNum>0&&t.appendChild(this._backButton),"all"===this._appData.QuestionDisplay&&!0===this._appData.SubmitAll&&t.appendChild(this._submitAllButton),t.appendChild(this._nextButton),"single"===this._appData.QuestionDisplay?!1===this._continuousFeedback&&!1===this._reportFeedback&&!0===this._endReport?document.getElementById("GS_nextButton").disabled=!1:(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").hide()):"all"===this._appData.QuestionDisplay&&!0===this._continuousFeedback&&!1===this._endReport&&(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").hide()),"single"===this._appData.QuestionDisplay?this._currentQuestion<this.Questions.length-1?document.getElementById("GS_nextButton").lastChild.innerHTML="Next Question":!0===this._noPost&&!1===this._endReport?document.getElementById("GS_nextButton").lastChild.innerHTML="Restart Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Continue":"all"===this._appData.QuestionDisplay&&(!0===this._noPost&&!1===this._endReport?document.getElementById("GS_nextButton").lastChild.innerHTML="Restart Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Continue"),this.HandleResizeEvent()},e.prototype.toggleInstructions=function(){$("#GS_instructionsToggle").toggle(),$("#GS_instructionsToggle").focus(),$("#GS_instructionsToggle").attr("role","alert"),$("#GS_instructionsToggle").attr("aria-live","assertive"),this.HandleResizeEvent()},e.prototype.buildInstructions=function(){var t,e,i;(t=document.createElement("div")).id="GS_instructionButtonSet",this._appContainer.appendChild(t),this._instructionButton.setAttribute("tabindex",this._tabIndex),this._tabIndex++,t.appendChild(this._instructionButton),(i=document.createElement("div")).id="GS_instructionsToggle",i.setAttribute("class","toggledOff"),(e=document.createElement("p")).id="GS_instructionText",e.setAttribute("class","tooltip"),"single"===this._appData.QuestionDisplay?!1===this._continuousFeedback&&!1===this._reportFeedback&&!0===this._endReport?e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_01+" <br><br> "+this._appData.Instructions_KeyUserText:e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_02+" <br><br> "+this._appData.Instructions_KeyUserText:"all"===this._appData.QuestionDisplay&&(!0===this._continuousFeedback&&!1===this._endReport?e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_03+" <br><br> "+this._appData.Instructions_KeyUserText:e.innerHTML=this._appData.Instruct_common+" "+this._appData.Instruct_04+" <br><br> "+this._appData.Instructions_KeyUserText),i.appendChild(e),$(i).insertBefore("#GS_instructionButtonSet"),$("#GS_instructionsToggle").toggle()},e.prototype.buildTable=function(){var t,e,i,s,n,a,o,r,l,c;for(l=void 0,(a=document.createElement("div")).id="GS_tableContainer",(n=document.createElement("table")).id="GS_table",(t=document.createElement("thead")).id="GS_tHead",(s=document.createElement("tr")).setAttribute("class","GS_tRow"),(e=document.createElement("th")).id="GS_tHeading",$(e).addClass("bg-table"),e.innerHTML="<p>"+this._appData.TableHeading+"</p>",e.setAttribute("scope","col"),!0===this._usingIE&&e.setAttribute("title",this._appData.TableHeading),e.setAttribute("tabindex",this._tabIndex),this._tabIndex++,s.appendChild(e),o=0;o<this._appData.Answers.length;)(l=document.createElement("th")).id="head"+o,l.setAttribute("class","GS_tAnswer"),l.setAttribute("scope","col"),!0===this._usingIE&&(l.title=this._appData.Answers[o].text),l.setAttribute("tabindex",this._tabIndex),this._tabIndex++,"none"!==this._appData.Answers[o].imgSrc&&null!==this._appData.Answers[o].imgSrc&&void 0!==this._appData.Answers[o].imgSrc&&""!==this._appData.Answers[o].imgSrc&&((r=document.createElement("img")).src=this._appData.Answers[o].imgSrc,r.alt=this._appData.Answers[o].alt,r.setAttribute("class","tableHeadImage"),l.appendChild(r)),(c=document.createElement("p")).innerHTML=this._appData.Answers[o].text,l.appendChild(c),s.appendChild(l),o++;(i=document.createElement("th")).id="GS_tResults",i.setAttribute("scope","col"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,s.appendChild(i),t.appendChild(s),n.appendChild(t),$(".gs_tResults").click(function(){$(".ansInfo").removeClass("hide")}),a.appendChild(n),$(a).hide().appendTo(this._appContainer).fadeIn(500)},e.prototype.addQuestions=function(){var t,e,i,s,n,a,o,r,l,c,d,u,p,h,_;if(h=void 0,p=void 0,_=void 0,l=void 0,d=void 0,c=void 0,u=void 0,n=void 0,i=void 0,s=void 0,t=void 0,e=void 0,r=void 0,(n=document.createElement("tbody")).id="GS_tBody",a=$("#GS_table")[0],"all"===this._appData.QuestionDisplay)for(o=0;o<this.Questions.length;){for((p=document.createElement("tr")).id="row"+o,p.setAttribute("class","GS_tRow"),(d=document.createElement("th")).id="question"+o,d.setAttribute("class","GS_tQuestion"),d.setAttribute("scope","row"),!0===this._usingIE&&(!0===this._appData.NumberedQuestions?d.setAttribute("title",o+1+". "+this.Questions[o].text):d.setAttribute("title",this.Questions[o].text)),d.setAttribute("tabindex",this._tabIndex),this._tabIndex++,o===this.Questions.length-1&&$(d).addClass("last"),c=document.createElement("p"),!0===this._appData.NumberedQuestions?c.innerHTML=o+1+". "+this.Questions[o].text:c.innerHTML=this.Questions[o].text,d.appendChild(c),p.appendChild(d),r=0;r<this._appData.Answers.length;)(h=document.createElement("td")).id="GS_tCheck"+o+r,h.setAttribute("class","GS_tCheckBox"),o===this.Questions.length-1&&$(h).addClass("last"),(_=document.createElement("p")).setAttribute("class","GS_feedback"),_.innerHTML='<span class="sr-only">Your Answer:</span>',(l=document.createElement("div")).id="checkbox"+o+r,l.setAttribute("class","GS_tInput check"),l.setAttribute("role","checkbox"),l.setAttribute("aria-checked","false"),l.setAttribute("tabindex",this._tabIndex),this._tabIndex++,l.onclick=function(t){return function(e){t.HandleSelection(e),!0===$("#GS_iToggle").hasClass("iDown")&&$("#GS_iToggle").click()}}(this),l.onkeydown=function(t){return function(e){13!==e.which&&32!==e.which||(t.HandleSelection(e),!0===$("#GS_iToggle").hasClass("iDown")&&$("#GS_iToggle").click())}}(this),h.appendChild(_),h.appendChild(l),p.appendChild(h),r++;(u=document.createElement("td")).id="results"+o,u.setAttribute("class","GS_tQuestionResults"),o===this.Questions.length-1&&$(u).addClass("last"),!0===this._continuousFeedback&&((i=document.createElement("button")).id="GS_submitButton"+o,i.setAttribute("class","GS_resultButton"),i.setAttribute("title","Submits your answer"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,i.onclick=function(){var t,e;(t=window.application).CheckAnswer(this,"submit"),e=this.id.substr(15),t._submitCheck.splice(e,1,!0)},(s=document.createElement("span")).setAttribute("class","GS_buttonLabel"),s.innerHTML="Submit",i.appendChild(s),u.appendChild(i)),(t=document.createElement("button")).id="GS_resetButton"+o,t.setAttribute("class","GS_resultButton"),t.setAttribute("title","Resets your answer"),t.setAttribute("tabindex",this._tabIndex),this._tabIndex+=2,t.onclick=function(){var t,e;(t=window.application).ResetQuestionAnswers(this),e=this.id.substr(14),t._submitCheck.splice(e,1,!1)},(e=document.createElement("span")).setAttribute("class","GS_buttonLabel"),e.innerHTML="Reset Answers",t.appendChild(e),u.appendChild(t),p.appendChild(u),n.appendChild(p),a.appendChild(n),o++}else if("single"===this._appData.QuestionDisplay){for((p=document.createElement("tr")).id="row"+this._currentQuestion,p.setAttribute("class","GS_tRow"),(d=document.createElement("th")).id="question"+this._currentQuestion,d.setAttribute("class","GS_tQuestion"),d.setAttribute("scope","row"),d.setAttribute("tabindex",this._tabIndex),this._tabIndex++,$(d).addClass("last"),(c=document.createElement("p")).innerHTML=this._currentQuestion+1+". "+this.Questions[this._currentQuestion].text,d.appendChild(c),p.appendChild(d),r=0;r<this._appData.Answers.length;)(h=document.createElement("td")).id="GS_tCheck"+this._currentQuestion+r,h.setAttribute("class","GS_tCheckBox"),$(h).addClass("last"),(_=document.createElement("p")).setAttribute("class","GS_feedback"),_.innerHTML="",(l=document.createElement("div")).id="checkbox"+this._currentQuestion+r,l.setAttribute("class","GS_tInput check"),l.setAttribute("role","checkbox"),l.setAttribute("aria-checked","false"),l.setAttribute("tabindex",this._tabIndex),l.setAttribute("onclick","window.application.HandleSelection(event)"),l.setAttribute("onkeydown","window.application.HandleKeyboardSelection(event)"),!0===this._allCheck[this._currentQuestion][r]&&$(l).addClass("selected"),this._tabIndex++,h.appendChild(_),h.appendChild(l),p.appendChild(h),r++;(u=document.createElement("td")).id="results"+this._currentQuestion,u.setAttribute("class","GS_tQuestionResults"),$(u).addClass("last"),!0!==this._continuousFeedback&&!0!==this._reportFeedback||((i=document.createElement("button")).id="GS_submitButton"+this._currentQuestion,i.setAttribute("class","GS_resultButton"),i.setAttribute("title","Submits your answer"),i.setAttribute("tabindex",this._tabIndex),this._tabIndex++,i.onclick=function(){var t;(t=window.application).CheckAnswer(this,"submit"),!0===t._reportFeedback&&($("#GS_report"+this.id.substr(15)).length&&$("#GS_report"+this.id.substr(15)).remove(),t.BuildMiniReport(this.id.substr(15))),document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)},(s=document.createElement("span")).setAttribute("class","GS_buttonLabel"),s.innerHTML="Submit",i.appendChild(s),u.appendChild(i)),(t=document.createElement("button")).id="GS_resetButton"+this._currentQuestion,t.setAttribute("class","GS_resultButton"),t.setAttribute("title","Resets your answer"),t.setAttribute("tabindex",this._tabIndex),this._tabIndex+=2,t.onclick=function(){var t;(t=window.application).ResetQuestionAnswers(this),!0===t._reportFeedback&&$("#GS_report"+this.id.substr(14)).length&&$("#GS_report"+this.id.substr(14)).remove(),"single"===t._appData.QuestionDisplay&&(!1===t._continuousFeedback&&!1===t._reportFeedback&&!0===t._endReport?(document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)):(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").fadeOut(500))),t.HandleResizeEvent()},(e=document.createElement("span")).setAttribute("class","GS_buttonLabel"),e.innerHTML="Reset Answers",t.appendChild(e),u.appendChild(t),p.appendChild(u),n.appendChild(p),a.appendChild(n)}},e.prototype.HandleSelection=function(t){var e;e=t.target,$(e).hasClass("check")&&($(e).hasClass("selected")?($(e).removeClass("selected"),e.setAttribute("aria-checked","false")):($(e).addClass("selected"),e.setAttribute("aria-checked","true")))},e.prototype.HandleKeyboardSelection=function(t){13!==t.which&&32!==t.which||this.HandleSelection(t)},e.prototype.CheckAnswer=function(t,e){var i,s,n;for(void 0,s=void 0,"next"===e?s=t:"submit"===e?s=t.id.substr(15):"submitAll"===e&&(s=t,document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)),i=0;i<this._appData.Answers.length;)n=document.getElementById("checkbox"+s+i),!0===$(n).hasClass("selected")?this._allCheck[s].splice(i,1,!0):this._allCheck[s].splice(i,1,!1),i++;"submit"!==e&&"submitAll"!==e||this.GenerateQuestionFeedback(s)},e.prototype.ResetQuestionAnswers=function(t){var e,i,s;for(i=t.id.substr(14),e=0;e<this._appData.Answers.length;)!0===$(document.getElementById("GS_tCheck"+i+e).lastChild).hasClass("GS_corrAnsImg")&&$(document.getElementById("GS_tCheck"+i+e).lastChild).remove(),!0===$(document.getElementById("GS_tCheck"+i+e).lastChild).hasClass("GS_feedback")&&$(document.getElementById("GS_tCheck"+i+e).lastChild).remove(),(s=document.getElementById("GS_tCheck"+i+e).lastChild).removeAttribute("title"),s.setAttribute("class","GS_tInput check"),s.setAttribute("role","checkbox"),s.setAttribute("aria-checked","false"),s.setAttribute("onclick","application.HandleSelection(event)"),s.setAttribute("onkeydown","application.HandleKeyboardSelection(event)"),$(".GS_tInput").css("cursor","pointer"),e++;!0===$(document.getElementById("results"+i).lastChild).hasClass("GS_feedback")&&$(document.getElementById("GS_qFeedback"+i)).remove(),document.getElementById("GS_submitButton"+i)&&(document.getElementById("GS_submitButton"+i).disabled=!1,$("#GS_submitButton"+i).fadeIn(500))},e.prototype.GenerateQuestionFeedback=function(t){var e,i,s,n,a;for(a=void 0,i=void 0,0,n=document.getElementById("results"+t),document.getElementById("GS_submitButton"+t).disabled=!0,$("#GS_submitButton"+t).fadeOut(500),$("#GS_resetButton"+t).focus(),s=0;s<this._appData.Answers.length;)e=document.getElementById("GS_tCheck"+t+s).lastChild,this._allCheck[t][s]===this._allCorrect[t][s]?(0,e.setAttribute("class","GS_tInput"),!0===this._allCheck[t][s]?($(e).addClass("selected"),e.setAttribute("title","Selected checkbox graphic.")):e.setAttribute("title","Unselected checkbox graphic."),e.removeAttribute("role"),e.removeAttribute("aria-checked"),e.removeAttribute("onclick"),e.removeAttribute("onkeydown"),$(".GS_tInput").css("cursor","default"),$(e).addClass("disabled"),(a=document.createElement("p")).setAttribute("class","GS_feedback"),a.innerHTML="",document.getElementById("GS_tCheck"+t+s).appendChild(a),(i=document.createElement("img")).setAttribute("class","GS_corrAnsImg"),!0===this._allCorrect[t][s]?(i.src="img/correct-ans-chk.png",i.alt="This checkbox should be selected.",document.getElementById("GS_tCheck"+t+s).appendChild(i)):(i.src="img/correct-ans-unchk.png",i.alt="This checkbox should not be selected.",document.getElementById("GS_tCheck"+t+s).appendChild(i))):(e.setAttribute("class","GS_tInput"),!0===this._allCheck[t][s]?($(e).addClass("selected"),e.setAttribute("title","Selected checkbox graphic.")):e.setAttribute("title","Unselected checkbox graphic."),e.removeAttribute("role"),e.removeAttribute("aria-checked"),e.removeAttribute("onclick"),e.removeAttribute("onkeydown"),$(".GS_tInput").css("cursor","default"),$(e).addClass("disabled"),(a=document.createElement("p")).setAttribute("class","GS_feedback"),a.innerHTML="",document.getElementById("GS_tCheck"+t+s).appendChild(a),(i=document.createElement("img")).setAttribute("class","GS_corrAnsImg"),!0===this._allCorrect[t][s]?(i.src="img/correct-ans-chk.png",i.alt="This checkbox should be selected.",document.getElementById("GS_tCheck"+t+s).appendChild(i)):(i.src="img/correct-ans-chk-wrong.png",i.alt="This checkbox should not be selected.",document.getElementById("GS_tCheck"+t+s).appendChild(i))),s++;!0===$(n.lastChild).hasClass("GS_feedback")&&$(document.getElementById("GS_qFeedback"+t)).remove(),document.getElementById("GS_resetButton"+t)},e.prototype.BuildMiniReport=function(t){var e,i,s,n,a,o;i=void 0,(s=document.createElement("div")).id="GS_report"+t,s.setAttribute("class","GS_report"),!0===this._finalReport&&((i=document.createElement("h"+(this._headingLevel+1))).setAttribute("class","GS_questionHead"),i.innerHTML="Question: "+this.Questions[t].text),(e=document.createElement("h"+(this._headingLevel+2))).setAttribute("class","GS_responseText"),(a=document.createElement("img")).setAttribute("class","GS_responseGraphic"),n=document.createElement("strong"),(o=this.GetQuestionScore(t))>=this.GetQuestionTotal(t)?(a.setAttribute("src","/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/icon-right-24.png"),a.setAttribute("alt","Right Answer Graphic."),n.innerHTML="Your answer was correct."):o<=0?(a.setAttribute("src","/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/icon-wrong-24.png"),a.setAttribute("alt","Incorrect Answer Graphic."),n.innerHTML="Your answer was incorrect."):(a.setAttribute("src","/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/icon-partial-24.png"),a.setAttribute("alt","Partially Correct Answer Graphic"),n.innerHTML="Your answer was partially correct."),e.appendChild(a),e.appendChild(n),!0===this._finalReport&&s.appendChild(i),s.appendChild(e),!0===this._finalReport?($(s).hide().appendTo(this._appContainer).fadeIn(500),this._appContainer.appendChild(s)):$(s).hide().insertAfter($("#GS_tableContainer")).fadeIn(500),this.BuildResultTable(t),this.BuildFeedback(t,s),this.HandleResizeEvent()},e.prototype.GetQuestionScore=function(t){var e,i,s;for(i=0,s=!1,e=0;e<this._appData.Answers.length;)!0===this._allCheck[t][e]&&!0===this._allCorrect[t][e]?i++:!0===this._allCheck[t][e]&&!1===this._allCorrect[t][e]&&!1===s&&(s=!0,i-=.1),e++;return i},e.prototype.GetQuestionTotal=function(t){var e,i;for(i=0,e=0;e<this._appData.Answers.length;)!0===this._allCorrect[t][e]&&i++,e++;return i},e.prototype.BuildResultTable=function(t){var e,i,s,n,a,o,r,l,c,d,u,p;for(o=document.getElementById("GS_report"+t),(c=document.createElement("div")).id="GS_resultTableContainer"+t,(l=document.createElement("table")).id="GS_resultTable"+t,l.setAttribute("class","GS_resultTable"),(n=document.createElement("thead")).id="GS_resultTableHead"+t,(r=document.createElement("tr")).setAttribute("class","GS_tRow"),(p=document.createElement("th")).id="GS_user"+t,p.setAttribute("class","GS_resultUser"),p.setAttribute("scope","col"),p.setAttribute("style","text-align:left;"),p.innerHTML="<strong>You Selected:</strong>",r.appendChild(p),n.appendChild(r),l.appendChild(n),(e=document.createElement("tbody")).id="GS_resultTableBody"+t,a=0;a<this._appData.Answers.length;)!0===this._allCheck[t][a]?s=!0===this._allCorrect[t][a]?"<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/ans-checked.png' class='GS_reportIcon' alt='Checked Box Graphic. This checkbox should be selected.' />":"<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/ans-fill.png' class='GS_reportIcon' alt='Checked Box Graphic.' />":d=!0===this._allCorrect[t][a]?"<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/ans-unchecked.png' class='GS_reportIcon' alt='Unchecked Box Graphic. This checkbox should be selected.' />":"<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/ans-blank.png' class='GS_reportIcon' alt='Unchecked Box Graphic.' />","<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/icon-right-24.png' class='GS_reportIcon' alt='Right Answer Graphic' />","<img src='/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/icon-wrong-24.png' class='GS_reportIcon' alt='Wrong Answer Graphic' />",i=void 0,void 0,(r=document.createElement("tr")).id="resultRow"+t+a,(u=document.createElement("td")).id="userAnswer"+t+a,u.setAttribute("class","GS_userAnswer"),i=!0===this._allCheck[t][a]?s:d,u.innerHTML=i+"<p class='GS_reportText'>"+this._appData.Answers[a].text+"</p>",a===this._appData.Answers.length-1&&$(u).addClass("last"),r.appendChild(u),e.appendChild(r),a++;l.appendChild(e),c.appendChild(l),o.appendChild(c)},e.prototype.BuildFeedback=function(t,e){var i,s,n,a,o,r,l;for(r=!0,(s=document.createElement("div")).id="GS_feedbackCont"+t,s.setAttribute("class","GS_feedbackCont"),(n=document.createElement("h"+(this._headingLevel+2))).setAttribute("class","GS_feedbackHead"),n.innerHTML="Feedback: ",s.appendChild(n),!0===this._appData.ShowQuestionFeedback&&null!==this.Questions[t].questionFeedback&&void 0!==this.Questions[t].questionFeedback&&"none"!==this.Questions[t].questionFeedback&&""!==this.Questions[t].questionFeedback&&((i=document.createElement("p")).innerHTML=this.Questions[t].questionFeedback,s.appendChild(i),r=!1),a=0;a<this.Questions[t].answers.length;){if(this._allCheck[t][a]!==this._allCorrect[t][a]&&("none"!==this.Questions[t].answers[a].feedback&&null!==this.Questions[t].answers[a].feedback&&void 0!==this.Questions[t].answers[a].feedback&&""!==this.Questions[t].answers[a].feedback&&(o=0),this.Questions[t].answers[a].feedback&&this.Questions[t].answers[a].feedback!==[]))for(;o<this.Questions[t].answers[a].feedback.length;)(l=document.createElement("h"+(this._headingLevel+3))).setAttribute("class","GS_option"),l.innerHTML=this._appData.Answers[a].text+": ",s.appendChild(l),this.EmbedMedia("feedback",s,this.Questions[t].answers[a].feedback[o]),r=!1,o++;a++}!1===r&&$(s).hide().appendTo(e).slideDown(500,"swing")},e.prototype.buildReport=function(){var t;for(t=0;t<this.Questions.length;)this.BuildMiniReport(t),t++;this.buildReportButtons(),this.scrollViewToTop()},e.prototype.buildReportButtons=function(){var t;(t=document.createElement("div")).id="GS_buttonSet",this._appContainer.appendChild(t),t.appendChild(this._nextButton),!0===this._noPost?document.getElementById("GS_nextButton").lastChild.innerHTML="Restart Activity":document.getElementById("GS_nextButton").lastChild.innerHTML="Continue"},e.prototype.CheckAllSubmits=function(){var t,e;for(e=0,t=0;t<this._submitCheck.length;)!1===this._submitCheck[t]&&e++,t++;0===e?(document.getElementById("GS_nextButton").disabled=!1,$("#GS_nextButton").fadeIn(500)):(document.getElementById("GS_nextButton").disabled=!0,$("#GS_nextButton").fadeOut(500))},e.prototype.EmbedMedia=function(t,e,i){var s,n,a,o,r,l;switch(n=void 0,a=void 0,r=void 0,(o=document.createElement("div")).setAttribute("class","GS_Media"),"feedback"===t?$(o).addClass("feedbackMedia"):"page"===t&&$(o).addClass("pageMedia"),i.type){case"link":(n=document.createElement("a")).setAttribute("class","GS_MediaLink"),n.setAttribute("href",i.src),n.setAttribute("target","_blank"),i.description?n.innerHTML=i.description:n.innerHTML="Link",o.appendChild(n);break;case"audio":(n=document.createElement("audio")).id=i.id,n.setAttribute("class","GS_MediaAudio"),n.setAttribute("target","_blank"),n.innerHTML='<source src="'+i.mp3+'" type="audio/mpeg"><source src="'+i.ogg+'" type="audio/ogg"><source src="'+i.wav+'" type="audio/wav"> Your browser does not support the audio tag.',o.appendChild(n),(s=document.createElement("button")).setAttribute("class","GS_audioButton"),s.setAttribute("title","Play Audio Button"),s.onclick=function(){document.getElementById(i.id).play()},o.appendChild(s);break;case"image":"none"!==i.mediaLink&&null!==i.mediaLink&&void 0!==i.mediaLink&&""!==i.mediaLink&&((a=document.createElement("a")).setAttribute("class","GS_MediaImageLink"),a.setAttribute("href",i.mediaLink),a.setAttribute("target","_blank")),(n=document.createElement("img")).setAttribute("class","GS_MediaImage embedMedia"),n.setAttribute("src",i.src),"none"!==i.width?n.setAttribute("width",i.width):n.setAttribute("width","420"),"none"!==i.height?n.setAttribute("height",i.height):n.setAttribute("height","315"),i.description&&n.setAttribute("alt",i.description),n.onerror=function(){n.setAttribute("src","/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/placeholder-error.png"),n.setAttribute("alt","Error. Image could not be loaded.")},n.onload=(l=this,function(){return l.HandleResizeEvent()}),"none"===i.mediaLink||null===i.mediaLink||void 0===i.mediaLink||""===i.mediaLink?o.appendChild(n):(a.appendChild(n),o.appendChild(a));break;case"YouTubeVideo":(r=this.validateYouTubeLink(i.src))?((n=document.createElement("iframe")).setAttribute("class","GS_MediaEmbeddedVideo embedMedia"),"none"!==i.width?n.setAttribute("width",i.width):n.setAttribute("width","420"),"none"!==i.height?n.setAttribute("height",i.height):n.setAttribute("height","315"),n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",r),i.description&&n.setAttribute("alt",i.description),o.appendChild(n),(a=document.createElement("a")).setAttribute("class","GS_MediaAltLink"),a.setAttribute("href",i.altLink),a.setAttribute("target","_blank"),a.innerHTML="Direct Link",o.appendChild(a)):((n=document.createElement("img")).setAttribute("class","GS_MediaImage embedMedia"),n.setAttribute("src","/shared/LCS_HTML_Templates/SkillPlan_Template_2020/_assets/iats/multiselect/img/placeholder-error.png"),n.setAttribute("alt","Error. Video could not be loaded."),n.setAttribute("width","420"),n.setAttribute("width","360"),o.appendChild(n));break;case"text":(n=document.createElement("p")).setAttribute("class","GS_MediaText"),n.setAttribute("target","_blank"),n.innerHTML=i.content,o.appendChild(n)}$(o).hide().appendTo(e).fadeIn(500)},e.prototype.validateYouTubeLink=function(t){return void 0,-1!==t.indexOf("www.youtube.com")&&(-1===t.indexOf("</iframe>")?-1!==t.indexOf("watch?v=")&&"https://www.youtube.com/embed/"+t.slice(t.indexOf("?v=")+3):-1!==t.indexOf("https://www.youtube.com/embed/")&&t.slice(t.indexOf("src")+5,t.indexOf('"',t.indexOf("src")+5)))},e.prototype.shuffle=function(t){var e,i,s;for(i=void 0,s=void 0,e=t.length;e;)i=Math.floor(Math.random()*e),s=t[--e],t[e]=t[i],t[i]=s;return t},e.prototype.buildAnswerReferences=function(){var t,e,i;for(e=0;e<this.Questions.length;){for(this._questionCheck=[],this._correctAnswers=[],i=0;i<this._appData.Answers.length;)t=!1,!0===this.Questions[e].answers[i].check&&(t=!0),this._questionCheck.push(!1),this._correctAnswers.push(t),i++;this._allCheck.push(this._questionCheck),this._allCorrect.push(this._correctAnswers),e++}},e.prototype.msieversion=function(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))},e.prototype.d2log=function(t){console.log(t)},e.prototype.mergeObjectData=function(t,e){var i,s;if(s=t,void 0===e.constructor||null===e.constructor)return s;if(e.constructor!==Object)return e;for(i=0;i<Object.keys(e).length;)void 0===s[Object.keys(e)[i]]?s[Object.keys(e)[i]]=e[Object.keys(e)[i]]:"object"==typeof s[Object.keys(e)[i]]&&this.mergeObjectData(s[Object.keys(e)[i]],e[Object.keys(e)[i]]),i++;return s},e.prototype.HandleResizeEvent=function(){var t;try{return t=window.document.body.getBoundingClientRect(),window.parent.document.getElementsByTagName("iframe")[0].style.height=t.height+t.top+20+"px"}catch(t){return this.d2log("Resize Error: Not in LE.")}},e.prototype.scrollViewToTop=function(){document.getElementById("dbox").scrollIntoView();$("#ContentView",window.parent.document).length>0&&$("html, body",window.parent.document).scrollTop($("#dbox").offset().top+$("#ContentView",window.parent.document).offset().top)},e}()}).call(this);